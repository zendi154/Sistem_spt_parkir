<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8">
    <title>Arsip Surat Notaris / PPAT</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

    <style>
        * {
            box-sizing: border-box;
        }

        body {
            margin: 0;
            font-family: system-ui, Arial, sans-serif;
            background: #0f172a;
            color: #fff;
        }

        /* ===== NAVBAR ===== */
        .navbar {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: 56px;
            background: rgba(15, 23, 42, .9);
            backdrop-filter: blur(12px);
            display: flex;
            align-items: center;
            padding: 0 16px;
            z-index: 1000;
            cursor: pointer;
        }

        .navbar i {
            color: #00ff4c;
            font-size: 20px;
            margin-right: 8px;
            text-shadow: 0 0 8px #00ff4c;
        }

        .navbar span {
            font-size: 15px;
            font-weight: 600;
        }

        /* ===== HEADER STICKY ===== */
        .app-header {
            position: sticky;
            top: 0;
            z-index: 100;
            background: #020617;
            padding: 20px;
            border-bottom: 1px solid #1e293b;
        }

        h2 {
            margin: 0 0 15px;
            text-align: center;
        }

        /* ===== CONTENT ===== */
        .content {
            padding: 20px;
        }

        /* ===== FORM ===== */
        form {
            background: #020617;
            padding: 15px;
            border-radius: 12px;
            margin-bottom: 15px;
        }

        .input-group {
            position: relative;
            margin-top: 18px;
        }

        .input-group input {
            width: 100%;
            padding: 12px 40px;
            border-radius: 8px;
            border: 1px solid #334155;
            background: transparent;
            color: #fff;
            outline: none;
        }

        .input-group i {
            position: absolute;
            left: 12px;
            top: 50%;
            transform: translateY(-50%);
            color: #94a3b8;
        }

        .input-group label {
            position: absolute;
            left: 40px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 14px;
            color: #94a3b8;
            background: #020617;
            padding: 0 6px;
            pointer-events: none;
            transition: .25s;
        }

        .input-group input:focus+label,
        .input-group input:not(:placeholder-shown)+label {
            top: -8px;
            font-size: 12px;
            color: #22c55e;
        }

        .input-group select {
            width: 100%;
            padding: 12px 40px;
            border-radius: 8px;
            border: 1px solid #334155;
            background: #020617;
            color: #fff;
            outline: none;
            appearance: none;
            cursor: pointer;
        }

        .input-group select:focus {
            border-color: #22c55e;
        }

        .input-group select:focus+label,
        .input-group select:not([value=""])+label {
            top: -8px;
            font-size: 12px;
            color: #22c55e;
        }

        /* ===== AUTOCOMPLETE ===== */
        .autocomplete {
            position: absolute;
            width: 100%;
            background: #020617;
            border: 1px solid #334155;
            border-radius: 8px;
            margin-top: 6px;
            z-index: 999;
            max-height: 220px;
            overflow-y: auto;
        }

        .autocomplete div {
            padding: 10px;
            cursor: pointer;
            border-bottom: 1px solid #1e293b;
        }

        .autocomplete div:hover {
            background: #1e293b;
        }

        .autocomplete span {
            color: #22c55e;
            font-weight: bold;
        }

        /* ===== BUTTON ===== */
        button {
            margin-top: 15px;
            padding: 10px 16px;
            border-radius: 8px;
            border: none;
            cursor: pointer;
            font-weight: 600;
        }

        .btn-save {
            background: #22c55e;
            color: #020617;
        }

        .btn-delete {
            background: #ef4444;
            color: #fff;
        }

        .btn-print {
            background: #38bdf8;
            color: #020617;
        }

        /* ===== FILTER ===== */
        .filter-box {
            display: flex;
            gap: 10px;
            align-items: center;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }

        .filter-box input {
            padding: 8px 12px;
            border-radius: 8px;
            border: 1px solid #334155;
            background: #020617;
            color: #fff;
        }

        /* ===== TABLE ===== */
        .table-wrapper {
            max-height: 60vh;
            overflow-y: auto;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            background: #020617;
        }

        th,
        td {
            border: 1px solid #1e293b;
            padding: 10px;
            text-align: center;
            font-size: 14px;
        }

        th {
            background: #1e293b;
            position: sticky;
            top: 0;
            z-index: 5;
        }

        /* ===== PRINT MODE ===== */
        @media print {

            body {
                background: #fff;
                color: #000;
            }

            /* sembunyikan semua */
            body * {
                visibility: hidden;
            }

            /* tampilkan tabel saja */
            table,
            table * {
                visibility: visible;
            }

            /* posisikan tabel ke atas */
            table {
                position: absolute;
                left: 0;
                top: 0;
                width: 100%;
                background: #fff;
                color: #000;
            }

            /* sembunyikan kolom aksi */
            th:last-child,
            td:last-child {
                display: none;
            }

            /* border hitam saat print */
            th,
            td {
                border: 1px solid #000;
                color: #000;
            }

            th {
                background: #f0f0f0;
            }
        }
    </style>
</head>

<body>
    <header class="app-header">
        <h2>TANDA TERIMA LAPORAN BULAN NOTARIS DAN PPAT KOTA BENGKULU</h2>

        <!-- NAVBAR -->
        <div class="navbar" onclick="goBack()">
            <i class="bi bi-receipt"></i>
            <span>Laporan Bulanan PPAT</span>
        </div>
        <form id="formSurat">
            <div class="input-group">
                <i class="fa-solid fa-user-tie"></i>
                <input type="text" id="nama_notaris" autocomplete="off" placeholder=" ">
                <label>Nama Notaris / PPAT</label>
                <div id="suggestions" class="autocomplete"></div>
            </div>

            <div class="input-group">
                <i class="fa-solid fa-calendar-days" id="iconTanggal"></i>
                <input type="date" id="tanggal_surat" required readonly>
                <label></label>
            </div>

            <div class="input-group">
                <i class="fa-solid fa-file-lines"></i>

                <select id="judul_surat" required>
                    <option value="" disabled selected hidden>Pilih Judul Surat</option>

                    <option value="Surat Permohonan">Surat Permohonan</option>
                    <option value="Surat Kuasa">Surat Kuasa</option>
                    <option value="Surat Pernyataan">Surat Pernyataan</option>
                    <option value="Surat Keterangan">Surat Keterangan</option>
                    <option value="Surat Undangan">Surat Undangan</option>
                    <option value="Surat Pemberitahuan">Surat Pemberitahuan</option>
                    <option value="Surat Pengantar">Surat Pengantar</option>
                    <option value="Laporan Bulanan">Laporan Bulanan</option>
                </select>

                <label></label>
            </div>
            <div class="input-group">
                <i class="fa-solid fa-file-lines"></i>

                <select id="dari_bidang" required>
                    <option value="" disabled selected hidden>Pilih Bidang Dibawah ini</option>

                    <option value="Sekretariat">Sekre</option>
                    <option value="Bidang Perencanan dan Pengendalian">P1</option>
                    <option value="Bidang Pengelolan dan Pendapatan">P2</option>
                    <option value="Bidang Pengendalian dan Evaluasi">P3</option>
                </select>

                <label></label>
            </div>

            <div class="input-group">
                <i class="fa-solid fa-user"></i>
                <input type="text" id="nama_penerima" placeholder=" ">
                <label>Nama Pengantar</label>
            </div>

            <button class="btn-save">
                <i class="fa-solid fa-paper-plane"></i>
                Simpan Data
            </button>
        </form>

        <div class="filter-box">
            <i class="fa-solid fa-filter"></i>
            <input type="date" id="filterTanggal">
            <button class="btn-print" onclick="printData()">
                <i class="fa-solid fa-print"></i> Print
            </button>
        </div>
    </header>

    <main class="content">
        <div class="table-wrapper">
            <table id="tabelSurat">
                <thead>
                    <tr>
                        <th>No</th>
                        <th>Nama Notaris / PPAT</th>
                        <th>Tanggal Surat</th>
                        <th>Judul Surat</th>
                        <th>Jam</th>
                        <th>Dari Bidang</th>
                        <th>Nama Pengantar</th>
                        <th>Paraf / TTD</th>
                        <th>Aksi</th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
        </div>
    </main>

    <script>
        // hapus otomatis data lama
        localStorage.removeItem("list_notaris");

        function getNotaris() {
            return defaultNotaris;
        }

        /* ================== KONSTANTA ================== */
        const STORAGE_KEY = "arsip_surat";
        const NOTARIS_KEY = "list_notaris";

        /* ================== ELEMENT ================== */
        const namaInput = document.getElementById("nama_notaris");
        const suggestions = document.getElementById("suggestions");
        const tbody = document.querySelector("#tabelSurat tbody");
        const form = document.getElementById("formSurat");
        const filterTanggal = document.getElementById("filterTanggal");

        const tanggalInput = document.getElementById("tanggal_surat");
        const iconTanggal = document.getElementById("iconTanggal");

        /* ================== DATA DEFAULT NOTARIS ================== */
        const defaultNotaris = [
            "AMELIA MERDEKA SARI, S.H., M.Kn",
            "ANJAR KRISTIANTO, S.H., M.Kn",
            "ATMIWIJAYA ARTATI, S.H., M.Kn",
            "ANGGA PRISMA JELITA, S.H.,M.Kn",
            "ANNISA FADILLA KARTAMADJA,S.H., M.Kn",
            "AULIYYA MARTATI, S.H., M.H",
            "ARDANA RESTIKA, S.H.,M.Kn",
            "AZIZA ADLIEN NABILA, S.H.,M.Kn",
            "BERTHA NOVELISA, S.H., M.Kn",
            "BJANZA METRA, S.H.,M.Kn",
            "BELLA FILDA AGATHA,S.H.,M.Kn",
            "CHRISTINE, S.H.,M.Kn",
            "DENI YOHANES, S.H., M.Kn",
            "DAUD WIDYA PRANATA SEPTI, S.H.,M.Kn",
            "DENI KRISTIAN NATANAEL, S.H,.M.Kn",
            "DESRIANO INDRA SYAHPUTRA, S.H.,M.Kn",
            "DORA YULIA AGUSTINA, S.H.,M.Kn",
            "DWI FANI ARSIKASINDI, S.H.,M.H",
            "EMY EFRIANTI AGUSTINI, S.H., M.Kn",
            "HARITRI GRATA JOHNI ARIFIN PUTRI, S.H., M.Kn",
            "HELEN SAPARINGGA,S.H., M.Kn",
            "H. EPISON, S.H",
            "H. MUFTI NOKHMAN, S.H.,M.Kn",
            "IDAYANTI, S.H",
            "IS HARIYANI,S.H",
            "ILHAM RAHMADI, SH",
            "INDAH ARIESTIA, S.H",
            "IRAWAN, S.H",
            "JULIWATI SIAGIAN, S.H,M.Kn",
            "KARTINI KESUMAWATY,S.H,.M.Kn",
            "KHAIRUNNISA, S.H., M.Kn",
            "KUSWARI, S.H",
            "LYDIA ARMAN, S.H., M.Kn",
            "LINDA OKTARINA, S.H",
            "MIRZA, S.H.,M.Kn",
            "NOVIARTATI, S.H",
            "RANDI WIBOWO, S.H.,M.Kn",
            "RIZFITRIANI ALAMSYAH, S.H.,M.Kn",
            "SARI PRIYANKA, S.H., M.Kn",
            "SUSANTI, S.H., M.Kn",
            "SARI INDRA, S.H.,M.Kn",
            "SHINTA WIDYANIATI, S.H.,M.Kn",
            "SICILIA HENDRA, S.H.,M.Kn",
            "SHABRINA ZHAFIRA,S.H.,M.Kn",
            "SISKA WIDIA ASTUTI, S.H.,M.Kn",
            "TINA HAERANI BUNGGASI, S.H.,M.Kn",
            "TIARA YUNITA OVELIA, S.H.,M.Kn",
            "VIKE DIANTI PUTRI, S.H.,M.Kn",
            "VINANDA LOVITA, S.H.,M.Kn",
            "WENY ARIMBI CRISTIANI,SST,Par.,S.H.,M.Kn"
        ];

        /* ================== STORAGE ================== */
        function getNotaris() {
            return JSON.parse(localStorage.getItem(NOTARIS_KEY)) || defaultNotaris;
        }

        function getData() {
            return JSON.parse(localStorage.getItem(STORAGE_KEY)) || [];
        }

        function saveData(data) {
            localStorage.setItem(STORAGE_KEY, JSON.stringify(data));
        }

        /* ================== AUTOCOMPLETE NOTARIS ================== */
        namaInput.addEventListener("input", () => {
            const keyword = namaInput.value.trim().toLowerCase();
            suggestions.innerHTML = "";

            if (!keyword) {
                suggestions.style.display = "none";
                return;
            }

            const hasil = getNotaris().filter(nama =>
                nama.toLowerCase().includes(keyword)
            );

            hasil.forEach(nama => {
                const div = document.createElement("div");

                const regex = new RegExp(`(${keyword})`, "gi");
                div.innerHTML = nama.replace(regex, "<span>$1</span>");

                div.onclick = () => {
                    namaInput.value = nama;
                    suggestions.style.display = "none";
                };

                suggestions.appendChild(div);
            });

            suggestions.style.display = hasil.length ? "block" : "none";
        });

        /* Tutup autocomplete saat klik luar */
        document.addEventListener("click", e => {
            if (!e.target.closest(".input-group")) {
                suggestions.style.display = "none";
            }
        });

        /* ================== SUBMIT FORM ================== */
        form.addEventListener("submit", e => {
            e.preventDefault();

            const data = getData();
            data.push({
                nama: nama_notaris.value,
                tanggal: tanggal_surat.value,
                judul: judul_surat.value,
                jam: new Date().toLocaleTimeString("id-ID"),
                dari_bidang: dari_bidang.value,
                penerima: nama_penerima.value
            });

            saveData(data);
            form.reset();
            setTanggalHariIni();
            render();
        });

        /* ================== RENDER TABLE ================== */
        function render() {
            tbody.innerHTML = "";
            const filter = filterTanggal.value;

            getData().forEach((d, i) => {
                if (filter && d.tanggal !== filter) return;

                tbody.innerHTML += `
            <tr>
                <td>${i + 1}</td>
                <td>${d.nama}</td>
                <td>${d.tanggal}</td>
                <td>${d.judul}</td>
                <td>${d.jam}</td>
                <td>${d.dari_bidang}</td>
                <td>${d.penerima}</td>
                <td></td>
                <td>
                    <button class="btn-delete" onclick="hapus(${i})">Hapus</button>
                </td>
            </tr>`;
            });
        }

        /* ================== HAPUS DATA ================== */
        function hapus(index) {
            if (!confirm("Yakin ingin menghapus data ini?")) return;
            const data = getData();
            data.splice(index, 1);
            saveData(data);
            render();
        }

        /* ================== FILTER TANGGAL ================== */
        filterTanggal.addEventListener("change", render);

        /* ================== PRINT ================== */
        function printData() {
            window.print();
        }

        /* ================== TANGGAL OTOMATIS ================== */
        function setTanggalHariIni() {
            const today = new Date().toISOString().split("T")[0];
            tanggalInput.value = today;
        }

        setTanggalHariIni();

        /* Klik icon / input buka date picker */
        iconTanggal?.addEventListener("click", () => tanggalInput.showPicker());
        tanggalInput.addEventListener("click", () => tanggalInput.showPicker?.());

        /* ================== INIT ================== */
        render();

        function goBack() {
            document.getElementById("loading").style.display = "flex";
            setTimeout(() => {
                window.location.href = "datajukir.html";
            }, 1500);
        }
    </script>

</body>

</html>
